document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector("#tablaItems tbody"),t=document.getElementById("btnAgregar"),n=document.getElementById("btnGuardar"),a=document.getElementById("btnImprimir"),r=document.getElementById("btnFactura"),d=document.getElementById("btnEnviar"),l=document.getElementById("resSubtotal"),c=document.getElementById("resImpuestos"),o=document.getElementById("resTotal"),i=document.getElementById("inputDescuento"),s=document.getElementById("inputAnticipo"),u=()=>{let t=0;e.querySelectorAll("tr").forEach(e=>{const n=parseFloat(e.querySelector(".cantidad").value)||0,a=parseFloat(e.querySelector(".precio").value)||0,r=n*a;e.querySelector(".subtotal").textContent=r.toFixed(2),t+=r});const n=t*.1,a=t*(parseFloat(i.value)||0)/100,r=parseFloat(s.value)||0,d=t+n-a-r;l.textContent=t.toFixed(2),c.textContent=n.toFixed(2),o.textContent=d.toFixed(2)};i.addEventListener("input",u),s.addEventListener("input",u),t.addEventListener("click",(()=>{const t=document.createElement("tr");t.innerHTML='<td><input type="text" class="descripcion" placeholder="Descripción" /></td><td><input type="number" class="cantidad" value="1" min="1" /></td><td><input type="number" class="precio" value="0.00" step="0.01" /></td><td>$<span class="subtotal">0.00</span></td><td><button class="btnEliminar">Eliminar</button></td>',t.querySelectorAll("input").forEach(e=>{e.addEventListener("input",u)}),t.querySelector(".btnEliminar").addEventListener("click",(()=>{t.remove(),u()})),e.appendChild(t),u()})),n.addEventListener("click",(()=>alert("Guardar aún no implementado"))),a.addEventListener("click",(()=>window.print())),r.addEventListener("click",(()=>alert("Generar PDF aún no implementado"))),d.addEventListener("click",(()=>alert("Enviar aún no implementado"))),t.click()});